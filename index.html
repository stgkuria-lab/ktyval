<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Will You Be My Valentine? ðŸ’œ</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at center, #a855f7, #6b21a8, #3b0764);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    overflow: hidden;
  }
  .card {
    background: #f7f7f7;
    padding: 40px;
    border-radius: 25px;
    border: 1px solid rgba(0,0,0,0.05);
    box-shadow: 0 25px 50px rgba(0,0,0,0.25);
    text-align: center;
    max-width: 420px;
    width: 90%;
    animation: popIn 0.9s ease;
  }
  @keyframes popIn {
    from { transform: scale(0.85); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
  h1 { color: #ea580c; }
  p { color: #555; margin-bottom: 30px; }
  .buttons {
    position: relative;
    height: 120px;
  }
  button {
    padding: 14px 30px;
    font-size: 18px;
    border: none;
    border-radius: 40px;
    cursor: pointer;
  }
  #yesBtn {
    background: #ea580c;
    color: #fff;
  }
  #noBtn {
    background: #eee;
    position: absolute;
    left: 55%;
  }
  .message {
    display: none;
    font-size: 22px;
    color: #ea580c;
    margin-top: 20px;
  }
  #continueBtn {
    display: none;
    margin-top: 20px;
    padding: 14px 30px;
    font-size: 18px;
    border-radius: 40px;
    border: none;
    background: #ea580c;
    color: white;
    cursor: pointer;
  }
  .heart, .confetti {
    position: absolute;
    animation: floatUp 4s linear forwards;
  }
  @keyframes floatUp {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-700px); opacity: 0; }
  }
</style>
</head>
<body>
  <div class="card">
    <h1 id="question">Kitty, will you be my Valentine? ðŸ’•</h1>
    <p id="subtitle">Youâ€™d make my world brighter ðŸ’œ</p>

    <div class="buttons">
      <button id="yesBtn">Yes ðŸ’œ</button>
      <button id="noBtn">No ðŸ™ˆ</button>
    </div>

    <div class="message" id="message">
      Yay! Youâ€™re my Valentine ðŸ’˜ðŸ¥°
    </div>

    <button id="continueBtn">Continue ðŸ’–</button>
  </div>

  <audio id="loveSound" preload="auto" src="easy.wav"></audio>

<script>
(() => {
  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const message = document.getElementById("message");
  const question = document.getElementById("question");
  const subtitle = document.getElementById("subtitle");
  const sound = document.getElementById("loveSound");
  const continueBtn = document.getElementById("continueBtn");

  let noCount = 0;
  let audioPrimed = false;

  // Prime audio for mobile autoplay restrictions
  function primeAudio() {
    if (audioPrimed) return;
    audioPrimed = true;
    sound.play()
      .then(() => {
        sound.pause();
        sound.currentTime = 0;
      })
      .catch(() => {});
    document.removeEventListener("touchstart", primeAudio);
    document.removeEventListener("click", primeAudio);
  }

  document.addEventListener("touchstart", primeAudio);
  document.addEventListener("click", primeAudio);

  // No button escapes
  function moveNoButton() {
    noCount += 1;

    const maxX = window.innerWidth - noBtn.offsetWidth - 20;
    const maxY = window.innerHeight - noBtn.offsetHeight - 20;

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    noBtn.style.position = "fixed";
    noBtn.style.left = `${x}px`;
    noBtn.style.top = `${y}px`;

    if (noCount === 3) subtitle.textContent = "Heyâ€¦ thatâ€™s mean ðŸ˜¢";
    if (noCount === 5) subtitle.textContent = "You canâ€™t escape destiny ðŸ˜";
    if (noCount === 7) subtitle.textContent = "Just say YES already ðŸ˜";
  }

  noBtn.addEventListener("mouseenter", moveNoButton);
  noBtn.addEventListener("touchstart", moveNoButton);
  noBtn.addEventListener("click", moveNoButton);

  // Detect iOS Safari (for autoplay limitations)
  function isIosSafari() {
    const ua = navigator.userAgent;
    return /iP(hone|od|ad)/.test(ua) && /Safari/.test(ua) && !/Chrome/.test(ua);
  }

  // Redirect to WhatsApp
  function redirectToWhatsApp() {
    window.location.href =
      "https://wa.me/254719480090?text=" +
      encodeURIComponent("Hey Pookie â¤ï¸ I clicked YES ðŸ˜˜ðŸ’–");
  }

  yesBtn.addEventListener("click", () => {
    sound.currentTime = 0;
    sound.play().catch(() => {});

    question.textContent = "Youâ€™re my Valentine ðŸ’ž";
    subtitle.style.display = "none";
    yesBtn.style.display = "none";
    noBtn.style.display = "none";
    message.style.display = "block";

    for (let i = 0; i < 25; i++) {
      createEmoji("â¤ï¸", "heart");
      createEmoji("ðŸ’œ", "confetti");
    }

    if (isIosSafari()) {
      continueBtn.style.display = "inline-block";
      continueBtn.onclick = redirectToWhatsApp;
    } else {
      let redirected = false;
      sound.onended = () => {
        if (!redirected) {
          redirected = true;
          redirectToWhatsApp();
        }
      };

      // Fallback redirect in case onended doesn't fire (e.g., sound.duration unavailable)
      const fallbackDelay = (sound.duration && !isNaN(sound.duration)) ? sound.duration * 1000 + 1500 : 7000;
      setTimeout(() => {
        if (!redirected) {
          redirected = true;
          redirectToWhatsApp();
        }
      }, fallbackDelay);
    }
  });

  function createEmoji(symbol, className) {
    const el = document.createElement("div");
    el.className = className;
    el.textContent = symbol;
    el.style.left = `${Math.random() * window.innerWidth}px`;
    el.style.bottom = "0px";
    el.style.fontSize = `${Math.random() * 20 + 15}px`;
    document.body.appendChild(el);

    setTimeout(() => {
      document.body.removeChild(el);
    }, 4000);
  }
})();
</script>
</body>
</html>


